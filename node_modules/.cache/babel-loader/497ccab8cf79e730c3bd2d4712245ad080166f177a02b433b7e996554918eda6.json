{"ast":null,"code":"import React from 'react';\nimport axios from 'axios';\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nconst navigate = useNavigate();\nconst serverUrl = 'http://localhost:5000';\nconst addProductsToState = async (endpoint, type, dispatch) => {\n  const response = await getProducts(endpoint);\n  if (response === 'FETCH_ERROR') {\n    dispatch({\n      type: 'FETCH_ERROR'\n    });\n  }\n  if (response.length !== 0) {\n    dispatch({\n      type: type,\n      payloads: response\n    });\n  }\n  console.log(response);\n};\nconst getProducts = async endpoint => {\n  try {\n    const response = await axios.get(`${serverUrl}${endpoint}`);\n    return response.data.productData;\n  } catch (err) {\n    return 'FETCH_ERROR';\n  }\n};\nconst sendDataToServerAndMovePage = (url, {\n  id,\n  title,\n  image,\n  description,\n  price\n}) => {\n  console.log('send data to server');\n  const productInfoUrl = `${serverUrl}/api/product-info`;\n  axios.post(productInfoUrl, {\n    title,\n    id,\n    image,\n    description,\n    price\n  }).then(res => {\n    console.log(res.data.msg);\n    if (url === '') return window.location.reload();\n    return movePage(url);\n  }).then(err => {\n    console.log('Failed send data to server!');\n  });\n  console.log(title);\n};\nconst movePage = url => {\n  navigate(url);\n};\nconst getImage = image => `/img/${image}`;\nexport { sendDataToServerAndMovePage, getImage, getProducts, addProductsToState };","map":{"version":3,"names":["React","axios","Route","Routes","useNavigate","navigate","serverUrl","addProductsToState","endpoint","type","dispatch","response","getProducts","length","payloads","console","log","get","data","productData","err","sendDataToServerAndMovePage","url","id","title","image","description","price","productInfoUrl","post","then","res","msg","window","location","reload","movePage","getImage"],"sources":["/data/data/com.termux/files/home/belajar_programming/react-express/client/src/utils/utils.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {Route, Routes, useNavigate} from 'react-router-dom';\n\nconst navigate = useNavigate();\n  const serverUrl = 'http://localhost:5000';\n\n  const addProductsToState = async (endpoint, type, dispatch) => {\n    const response = await getProducts(endpoint);\n    \n    if(response === 'FETCH_ERROR') {\n      dispatch({type: 'FETCH_ERROR'});\n    } \n      \n    if(response.length !== 0) {\n      dispatch({type: type, payloads: response})\n    }\n      \n    console.log(response)\n  }\n  \n  const getProducts = async endpoint => {\n    try {\n      const response = await axios.get(`${serverUrl}${endpoint}`);\n      \n      return response.data.productData;\n    } catch(err) {\n      return 'FETCH_ERROR';\n    }\n  }\n  \n  const sendDataToServerAndMovePage = (url, {id, title, image, description, price}) => {\n    console.log('send data to server')\n    const productInfoUrl = `${serverUrl}/api/product-info`;\n    \n    axios.post(productInfoUrl, {\n      title,\n      id,\n      image,\n      description,\n      price\n    })\n    .then(res => {\n      console.log(res.data.msg);\n      \n      if(url === '') return window.location.reload();\n      return movePage(url);\n    })\n    .then(err => {\n      console.log('Failed send data to server!');\n    });\n    \n    console.log(title)\n  }\n  \n  const movePage = url => {\n    navigate(url);\n  }\n  \n  const getImage = image => `/img/${image}`;\n  \nexport {\n  sendDataToServerAndMovePage,\n      getImage,\n      getProducts,\n      addProductsToState,\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,KAAK,EAAEC,MAAM,EAAEC,WAAW,QAAO,kBAAkB;AAE3D,MAAMC,QAAQ,GAAGD,WAAW,CAAC,CAAC;AAC5B,MAAME,SAAS,GAAG,uBAAuB;AAEzC,MAAMC,kBAAkB,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,IAAI,EAAEC,QAAQ,KAAK;EAC7D,MAAMC,QAAQ,GAAG,MAAMC,WAAW,CAACJ,QAAQ,CAAC;EAE5C,IAAGG,QAAQ,KAAK,aAAa,EAAE;IAC7BD,QAAQ,CAAC;MAACD,IAAI,EAAE;IAAa,CAAC,CAAC;EACjC;EAEA,IAAGE,QAAQ,CAACE,MAAM,KAAK,CAAC,EAAE;IACxBH,QAAQ,CAAC;MAACD,IAAI,EAAEA,IAAI;MAAEK,QAAQ,EAAEH;IAAQ,CAAC,CAAC;EAC5C;EAEAI,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC;AACvB,CAAC;AAED,MAAMC,WAAW,GAAG,MAAMJ,QAAQ,IAAI;EACpC,IAAI;IACF,MAAMG,QAAQ,GAAG,MAAMV,KAAK,CAACgB,GAAG,CAAE,GAAEX,SAAU,GAAEE,QAAS,EAAC,CAAC;IAE3D,OAAOG,QAAQ,CAACO,IAAI,CAACC,WAAW;EAClC,CAAC,CAAC,OAAMC,GAAG,EAAE;IACX,OAAO,aAAa;EACtB;AACF,CAAC;AAED,MAAMC,2BAA2B,GAAGA,CAACC,GAAG,EAAE;EAACC,EAAE;EAAEC,KAAK;EAAEC,KAAK;EAAEC,WAAW;EAAEC;AAAK,CAAC,KAAK;EACnFZ,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;EAClC,MAAMY,cAAc,GAAI,GAAEtB,SAAU,mBAAkB;EAEtDL,KAAK,CAAC4B,IAAI,CAACD,cAAc,EAAE;IACzBJ,KAAK;IACLD,EAAE;IACFE,KAAK;IACLC,WAAW;IACXC;EACF,CAAC,CAAC,CACDG,IAAI,CAACC,GAAG,IAAI;IACXhB,OAAO,CAACC,GAAG,CAACe,GAAG,CAACb,IAAI,CAACc,GAAG,CAAC;IAEzB,IAAGV,GAAG,KAAK,EAAE,EAAE,OAAOW,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC9C,OAAOC,QAAQ,CAACd,GAAG,CAAC;EACtB,CAAC,CAAC,CACDQ,IAAI,CAACV,GAAG,IAAI;IACXL,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC5C,CAAC,CAAC;EAEFD,OAAO,CAACC,GAAG,CAACQ,KAAK,CAAC;AACpB,CAAC;AAED,MAAMY,QAAQ,GAAGd,GAAG,IAAI;EACtBjB,QAAQ,CAACiB,GAAG,CAAC;AACf,CAAC;AAED,MAAMe,QAAQ,GAAGZ,KAAK,IAAK,QAAOA,KAAM,EAAC;AAE3C,SACEJ,2BAA2B,EACvBgB,QAAQ,EACRzB,WAAW,EACXL,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}