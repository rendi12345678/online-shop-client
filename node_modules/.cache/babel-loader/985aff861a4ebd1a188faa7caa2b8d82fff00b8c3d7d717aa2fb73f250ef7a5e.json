{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"loadStaticPaths\", {\n  enumerable: true,\n  get: function () {\n    return loadStaticPaths;\n  }\n});\nrequire(\"../require-hook\");\nrequire(\"../node-environment\");\nconst _utils = require(\"../../build/utils\");\nconst _loadcomponents = require(\"../load-components\");\nconst _setuphttpagentenv = require(\"../setup-http-agent-env\");\nconst _hooksservercontext = /*#__PURE__*/_interop_require_wildcard(require(\"../../client/components/hooks-server-context\"));\nconst _staticgenerationasyncstorageexternal = require(\"../../client/components/static-generation-async-storage.external\");\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nconst {\n  AppRouteRouteModule\n} = require(\"../future/route-modules/app-route/module.compiled\");\nasync function loadStaticPaths({\n  distDir,\n  pathname,\n  config,\n  httpAgentOptions,\n  locales,\n  defaultLocale,\n  isAppPath,\n  page,\n  isrFlushToDisk,\n  fetchCacheKeyPrefix,\n  maxMemoryCacheSize,\n  requestHeaders,\n  incrementalCacheHandlerPath,\n  ppr\n}) {\n  // update work memory runtime-config\n  require(\"../../shared/lib/runtime-config.external\").setConfig(config);\n  (0, _setuphttpagentenv.setHttpClientAndAgentOptions)({\n    httpAgentOptions\n  });\n  const components = await (0, _loadcomponents.loadComponents)({\n    distDir,\n    // In `pages/`, the page is the same as the pathname.\n    page: page || pathname,\n    isAppPath\n  });\n  if (!components.getStaticPaths && !isAppPath) {\n    // we shouldn't get to this point since the worker should\n    // only be called for SSG pages with getStaticPaths\n    throw new Error(`Invariant: failed to load page with getStaticPaths for ${pathname}`);\n  }\n  if (isAppPath) {\n    const {\n      routeModule\n    } = components;\n    const generateParams = routeModule && AppRouteRouteModule.is(routeModule) ? [{\n      config: {\n        revalidate: routeModule.userland.revalidate,\n        dynamic: routeModule.userland.dynamic,\n        dynamicParams: routeModule.userland.dynamicParams\n      },\n      generateStaticParams: routeModule.userland.generateStaticParams,\n      segmentPath: pathname\n    }] : await (0, _utils.collectGenerateParams)(components.ComponentMod.tree);\n    return await (0, _utils.buildAppStaticPaths)({\n      page: pathname,\n      generateParams,\n      configFileName: config.configFileName,\n      distDir,\n      requestHeaders,\n      incrementalCacheHandlerPath,\n      serverHooks: _hooksservercontext,\n      staticGenerationAsyncStorage: _staticgenerationasyncstorageexternal.staticGenerationAsyncStorage,\n      isrFlushToDisk,\n      fetchCacheKeyPrefix,\n      maxMemoryCacheSize,\n      ppr\n    });\n  }\n  return await (0, _utils.buildStaticPaths)({\n    page: pathname,\n    getStaticPaths: components.getStaticPaths,\n    configFileName: config.configFileName,\n    locales,\n    defaultLocale\n  });\n}","map":{"version":3,"names":["loadStaticPaths","AppRouteRouteModule","require","distDir","pathname","config","httpAgentOptions","locales","defaultLocale","isAppPath","page","isrFlushToDisk","fetchCacheKeyPrefix","maxMemoryCacheSize","requestHeaders","incrementalCacheHandlerPath","ppr","setConfig","_setuphttpagentenv","setHttpClientAndAgentOptions","components","_loadcomponents","loadComponents","getStaticPaths","Error","routeModule","generateParams","is","revalidate","userland","dynamic","dynamicParams","generateStaticParams","segmentPath","_utils","collectGenerateParams","ComponentMod","tree","buildAppStaticPaths","configFileName","serverHooks","_hooksservercontext","staticGenerationAsyncStorage","_staticgenerationasyncstorageexternal","buildStaticPaths"],"sources":["../../../src/server/dev/static-paths-worker.ts"],"sourcesContent":[null],"mappings":";;;;;+BA6BsB;;;WAAAA,eAAA;;;QA3Bf;QACA;uBAMA;gCAEwB;mCACc;2EAEhB;sDACgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE7C,MAAM;EAAEC;AAAmB,CAAE,GAC3BC,OAAA,CAAQ;AAWH,eAAeF,gBAAgB;EACpCG,OAAO;EACPC,QAAQ;EACRC,MAAM;EACNC,gBAAgB;EAChBC,OAAO;EACPC,aAAa;EACbC,SAAS;EACTC,IAAI;EACJC,cAAc;EACdC,mBAAmB;EACnBC,kBAAkB;EAClBC,cAAc;EACdC,2BAA2B;EAC3BC;AAAG,CAgBJ;EAKC;EACAd,OAAA,CAAQ,4CAA4Ce,SAAS,CAACZ,MAAA;EAC9D,IAAAa,kBAAA,CAAAC,4BAA4B,EAAC;IAC3Bb;EACF;EAEA,MAAMc,UAAA,GAAa,MAAM,IAAAC,eAAA,CAAAC,cAAc,EAAC;IACtCnB,OAAA;IACA;IACAO,IAAA,EAAMA,IAAA,IAAQN,QAAA;IACdK;EACF;EAEA,IAAI,CAACW,UAAA,CAAWG,cAAc,IAAI,CAACd,SAAA,EAAW;IAC5C;IACA;IACA,MAAM,IAAIe,KAAA,CACP,0DAAyDpB,QAAS,EAAC;EAExE;EAEA,IAAIK,SAAA,EAAW;IACb,MAAM;MAAEgB;IAAW,CAAE,GAAGL,UAAA;IACxB,MAAMM,cAAA,GACJD,WAAA,IAAexB,mBAAA,CAAoB0B,EAAE,CAACF,WAAA,IAClC,CACE;MACEpB,MAAA,EAAQ;QACNuB,UAAA,EAAYH,WAAA,CAAYI,QAAQ,CAACD,UAAU;QAC3CE,OAAA,EAASL,WAAA,CAAYI,QAAQ,CAACC,OAAO;QACrCC,aAAA,EAAeN,WAAA,CAAYI,QAAQ,CAACE;MACtC;MACAC,oBAAA,EAAsBP,WAAA,CAAYI,QAAQ,CAACG,oBAAoB;MAC/DC,WAAA,EAAa7B;IACf,EACD,GACD,MAAM,IAAA8B,MAAA,CAAAC,qBAAqB,EAACf,UAAA,CAAWgB,YAAY,CAACC,IAAI;IAE9D,OAAO,MAAM,IAAAH,MAAA,CAAAI,mBAAmB,EAAC;MAC/B5B,IAAA,EAAMN,QAAA;MACNsB,cAAA;MACAa,cAAA,EAAgBlC,MAAA,CAAOkC,cAAc;MACrCpC,OAAA;MACAW,cAAA;MACAC,2BAAA;MACAyB,WAAA,EAAAC,mBAAA;MACAC,4BAAA,EAAAC,qCAAA,CAAAD,4BAA4B;MAC5B/B,cAAA;MACAC,mBAAA;MACAC,kBAAA;MACAG;IACF;EACF;EAEA,OAAO,MAAM,IAAAkB,MAAA,CAAAU,gBAAgB,EAAC;IAC5BlC,IAAA,EAAMN,QAAA;IACNmB,cAAA,EAAgBH,UAAA,CAAWG,cAAc;IACzCgB,cAAA,EAAgBlC,MAAA,CAAOkC,cAAc;IACrChC,OAAA;IACAC;EACF;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}