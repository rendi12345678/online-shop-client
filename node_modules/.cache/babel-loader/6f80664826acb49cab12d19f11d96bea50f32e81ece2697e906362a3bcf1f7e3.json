{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  NodeNextRequest: null,\n  NodeNextResponse: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  NodeNextRequest: function () {\n    return NodeNextRequest;\n  },\n  NodeNextResponse: function () {\n    return NodeNextResponse;\n  }\n});\nconst _apiutils = require(\"../api-utils\");\nconst _requestmeta = require(\"../request-meta\");\nconst _index = require(\"./index\");\nlet _NEXT_REQUEST_META = _requestmeta.NEXT_REQUEST_META;\nclass NodeNextRequest extends _index.BaseNextRequest {\n  get originalRequest() {\n    // Need to mimic these changes to the original req object for places where we use it:\n    // render.tsx, api/ssg requests\n    this._req[_requestmeta.NEXT_REQUEST_META] = this[_requestmeta.NEXT_REQUEST_META];\n    this._req.url = this.url;\n    this._req.cookies = this.cookies;\n    return this._req;\n  }\n  set originalRequest(value) {\n    this._req = value;\n  }\n  constructor(_req) {\n    super(_req.method.toUpperCase(), _req.url, _req);\n    this._req = _req;\n    this.headers = this._req.headers;\n    this[_NEXT_REQUEST_META] = this._req[_requestmeta.NEXT_REQUEST_META] || {};\n  }\n}\nclass NodeNextResponse extends _index.BaseNextResponse {\n  get originalResponse() {\n    if (_apiutils.SYMBOL_CLEARED_COOKIES in this) {\n      this._res[_apiutils.SYMBOL_CLEARED_COOKIES] = this[_apiutils.SYMBOL_CLEARED_COOKIES];\n    }\n    return this._res;\n  }\n  constructor(_res) {\n    super(_res);\n    this._res = _res;\n    this.textBody = undefined;\n  }\n  get sent() {\n    return this._res.finished || this._res.headersSent;\n  }\n  get statusCode() {\n    return this._res.statusCode;\n  }\n  set statusCode(value) {\n    this._res.statusCode = value;\n  }\n  get statusMessage() {\n    return this._res.statusMessage;\n  }\n  set statusMessage(value) {\n    this._res.statusMessage = value;\n  }\n  setHeader(name, value) {\n    this._res.setHeader(name, value);\n    return this;\n  }\n  removeHeader(name) {\n    this._res.removeHeader(name);\n    return this;\n  }\n  getHeaderValues(name) {\n    const values = this._res.getHeader(name);\n    if (values === undefined) return undefined;\n    return (Array.isArray(values) ? values : [values]).map(value => value.toString());\n  }\n  hasHeader(name) {\n    return this._res.hasHeader(name);\n  }\n  getHeader(name) {\n    const values = this.getHeaderValues(name);\n    return Array.isArray(values) ? values.join(\",\") : undefined;\n  }\n  getHeaders() {\n    return this._res.getHeaders();\n  }\n  appendHeader(name, value) {\n    const currentValues = this.getHeaderValues(name) ?? [];\n    if (!currentValues.includes(value)) {\n      this._res.setHeader(name, [...currentValues, value]);\n    }\n    return this;\n  }\n  body(value) {\n    this.textBody = value;\n    return this;\n  }\n  send() {\n    this._res.end(this.textBody);\n  }\n}","map":{"version":3,"names":["NodeNextRequest","NodeNextResponse","_NEXT_REQUEST_META","_requestmeta","NEXT_REQUEST_META","_index","BaseNextRequest","originalRequest","_req","url","cookies","value","constructor","method","toUpperCase","headers","BaseNextResponse","originalResponse","_apiutils","SYMBOL_CLEARED_COOKIES","_res","textBody","undefined","sent","finished","headersSent","statusCode","statusMessage","setHeader","name","removeHeader","getHeaderValues","values","getHeader","Array","isArray","map","toString","hasHeader","join","getHeaders","appendHeader","currentValues","includes","body","send","end"],"sources":["../../../src/server/base-http/node.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}