{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  INTERNALS: null,\n  NextRequest: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  INTERNALS: function () {\n    return INTERNALS;\n  },\n  NextRequest: function () {\n    return NextRequest;\n  }\n});\nconst _nexturl = require(\"../next-url\");\nconst _utils = require(\"../utils\");\nconst _error = require(\"../error\");\nconst _cookies = require(\"./cookies\");\nconst INTERNALS = Symbol(\"internal request\");\nclass NextRequest extends Request {\n  constructor(input, init = {}) {\n    const url = typeof input !== \"string\" && \"url\" in input ? input.url : String(input);\n    (0, _utils.validateURL)(url);\n    if (input instanceof Request) super(input, init);else super(url, init);\n    const nextUrl = new _nexturl.NextURL(url, {\n      headers: (0, _utils.toNodeOutgoingHttpHeaders)(this.headers),\n      nextConfig: init.nextConfig\n    });\n    this[INTERNALS] = {\n      cookies: new _cookies.RequestCookies(this.headers),\n      geo: init.geo || {},\n      ip: init.ip,\n      nextUrl,\n      url: process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE ? url : nextUrl.toString()\n    };\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return {\n      cookies: this.cookies,\n      geo: this.geo,\n      ip: this.ip,\n      nextUrl: this.nextUrl,\n      url: this.url,\n      // rest of props come from Request\n      bodyUsed: this.bodyUsed,\n      cache: this.cache,\n      credentials: this.credentials,\n      destination: this.destination,\n      headers: Object.fromEntries(this.headers),\n      integrity: this.integrity,\n      keepalive: this.keepalive,\n      method: this.method,\n      mode: this.mode,\n      redirect: this.redirect,\n      referrer: this.referrer,\n      referrerPolicy: this.referrerPolicy,\n      signal: this.signal\n    };\n  }\n  get cookies() {\n    return this[INTERNALS].cookies;\n  }\n  get geo() {\n    return this[INTERNALS].geo;\n  }\n  get ip() {\n    return this[INTERNALS].ip;\n  }\n  get nextUrl() {\n    return this[INTERNALS].nextUrl;\n  }\n  /**\n  * @deprecated\n  * `page` has been deprecated in favour of `URLPattern`.\n  * Read more: https://nextjs.org/docs/messages/middleware-request-page\n  */\n  get page() {\n    throw new _error.RemovedPageError();\n  }\n  /**\n  * @deprecated\n  * `ua` has been removed in favour of \\`userAgent\\` function.\n  * Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  */\n  get ua() {\n    throw new _error.RemovedUAError();\n  }\n  get url() {\n    return this[INTERNALS].url;\n  }\n}","map":{"version":3,"names":["INTERNALS","NextRequest","Symbol","Request","constructor","input","init","url","String","_utils","validateURL","nextUrl","_nexturl","NextURL","headers","toNodeOutgoingHttpHeaders","nextConfig","cookies","_cookies","RequestCookies","geo","ip","process","env","__NEXT_NO_MIDDLEWARE_URL_NORMALIZE","toString","for","bodyUsed","cache","credentials","destination","Object","fromEntries","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","page","_error","RemovedPageError","ua","RemovedUAError"],"sources":["../../../../src/server/web/spec-extension/request.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}