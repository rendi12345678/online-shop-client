{"ast":null,"code":"// Synchronously inject a require hook for webpack and webpack/. It's required to use the internal ncc webpack version.\n// This is needed for userland plugins to attach to the same webpack instance as Next.js'.\n// Individually compiled modules are as defined for the compilation in bundles/webpack/packages/*.\n// This module will only be loaded once per process.\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  hookPropertyMap: null,\n  defaultOverrides: null,\n  addHookAliases: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  hookPropertyMap: function () {\n    return hookPropertyMap;\n  },\n  defaultOverrides: function () {\n    return defaultOverrides;\n  },\n  addHookAliases: function () {\n    return addHookAliases;\n  }\n});\nconst path = require(\"path\");\nconst mod = require(\"module\");\nconst originalRequire = mod.prototype.require;\nconst resolveFilename = mod._resolveFilename;\nlet resolve = process.env.NEXT_MINIMAL ? __non_webpack_require__.resolve : require.resolve;\nconst hookPropertyMap = new Map();\nconst defaultOverrides = {\n  \"styled-jsx\": path.dirname(resolve(\"styled-jsx/package.json\")),\n  \"styled-jsx/style\": resolve(\"styled-jsx/style\")\n};\nconst toResolveMap = map => Object.entries(map).map(([key, value]) => [key, resolve(value)]);\nfunction addHookAliases(aliases = []) {\n  for (const [key, value] of aliases) {\n    hookPropertyMap.set(key, value);\n  }\n}\naddHookAliases(toResolveMap(defaultOverrides));\nmod._resolveFilename = function (originalResolveFilename, requestMap, request, parent, isMain, options) {\n  const hookResolved = requestMap.get(request);\n  if (hookResolved) request = hookResolved;\n  return originalResolveFilename.call(mod, request, parent, isMain, options);\n  // We use `bind` here to avoid referencing outside variables to create potential memory leaks.\n}.bind(null, resolveFilename, hookPropertyMap);\n// This is a hack to make sure that if a user requires a Next.js module that wasn't bundled\n// that needs to point to the rendering runtime version, it will point to the correct one.\n// This can happen on `pages` when a user requires a dependency that uses next/image for example.\nmod.prototype.require = function (request) {\n  if (request.endsWith(\".shared-runtime\")) {\n    return originalRequire.call(this, `next/dist/server/future/route-modules/pages/vendored/contexts/${path.basename(request, \".shared-runtime\")}`);\n  }\n  return originalRequire.call(this, request);\n};","map":{"version":3,"names":["hookPropertyMap","defaultOverrides","addHookAliases","path","require","mod","originalRequire","prototype","resolveFilename","_resolveFilename","resolve","process","env","NEXT_MINIMAL","__non_webpack_require__","Map","dirname","toResolveMap","map","Object","entries","key","value","aliases","set","originalResolveFilename","requestMap","request","parent","isMain","options","hookResolved","get","call","bind","endsWith","basename"],"sources":["../../src/server/require-hook.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;EAWaA,eAAe,WAAAA,CAAA;WAAfA,eAAA;;EAEAC,gBAAgB,WAAAA,CAAA;WAAhBA,gBAAA;;EAQGC,cAAc,WAAAA,CAAA;WAAdA,cAAA;;;AApBhB,MAAMC,IAAA,GAAOC,OAAA,CAAQ;AACrB,MAAMC,GAAA,GAAMD,OAAA,CAAQ;AACpB,MAAME,eAAA,GAAkBD,GAAA,CAAIE,SAAS,CAACH,OAAO;AAC7C,MAAMI,eAAA,GAAkBH,GAAA,CAAII,gBAAgB;AAE5C,IAAIC,OAAA,GAAkCC,OAAA,CAAQC,GAAG,CAACC,YAAY,GAE1DC,uBAAA,CAAwBJ,OAAO,GAC/BN,OAAA,CAAQM,OAAO;AAEZ,MAAMV,eAAA,GAAkB,IAAIe,GAAA;AAE5B,MAAMd,gBAAA,GAAmB;EAC9B,cAAcE,IAAA,CAAKa,OAAO,CAACN,OAAA,CAAQ;EACnC,oBAAoBA,OAAA,CAAQ;AAC9B;AAEA,MAAMO,YAAA,GAAgBC,GAAA,IACpBC,MAAA,CAAOC,OAAO,CAACF,GAAA,EAAKA,GAAG,CAAC,CAAC,CAACG,GAAA,EAAKC,KAAA,CAAM,KAAK,CAACD,GAAA,EAAKX,OAAA,CAAQY,KAAA,EAAO;AAE1D,SAASpB,eAAeqB,OAAA,GAA8B,EAAE;EAC7D,KAAK,MAAM,CAACF,GAAA,EAAKC,KAAA,CAAM,IAAIC,OAAA,EAAS;IAClCvB,eAAA,CAAgBwB,GAAG,CAACH,GAAA,EAAKC,KAAA;EAC3B;AACF;AAEApB,cAAA,CAAee,YAAA,CAAahB,gBAAA;AAE5BI,GAAA,CAAII,gBAAgB,GAAG,UACrBgB,uBAKW,EACXC,UAA+B,EAC/BC,OAAe,EACfC,MAAc,EACdC,MAAe,EACfC,OAAY;EAEZ,MAAMC,YAAA,GAAeL,UAAA,CAAWM,GAAG,CAACL,OAAA;EACpC,IAAII,YAAA,EAAcJ,OAAA,GAAUI,YAAA;EAE5B,OAAON,uBAAA,CAAwBQ,IAAI,CAAC5B,GAAA,EAAKsB,OAAA,EAASC,MAAA,EAAQC,MAAA,EAAQC,OAAA;EAElE;AACF,EAAEI,IAAI,CAAC,MAAM1B,eAAA,EAAiBR,eAAA;AAE9B;AACA;AACA;AACAK,GAAA,CAAIE,SAAS,CAACH,OAAO,GAAG,UAAUuB,OAAe;EAC/C,IAAIA,OAAA,CAAQQ,QAAQ,CAAC,oBAAoB;IACvC,OAAO7B,eAAA,CAAgB2B,IAAI,CACzB,IAAI,EACH,iEAAgE9B,IAAA,CAAKiC,QAAQ,CAC5ET,OAAA,EACA,kBACA,EAAC;EAEP;EAEA,OAAOrB,eAAA,CAAgB2B,IAAI,CAAC,IAAI,EAAEN,OAAA;AACpC"},"metadata":{},"sourceType":"script","externalDependencies":[]}