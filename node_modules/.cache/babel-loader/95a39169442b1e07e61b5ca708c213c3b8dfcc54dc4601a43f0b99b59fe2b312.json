{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"formatServerError\", {\n  enumerable: true,\n  get: function () {\n    return formatServerError;\n  }\n});\nconst invalidServerComponentReactHooks = [\"useDeferredValue\", \"useEffect\", \"useImperativeHandle\", \"useInsertionEffect\", \"useLayoutEffect\", \"useReducer\", \"useRef\", \"useState\", \"useSyncExternalStore\", \"useTransition\", \"experimental_useOptimistic\", \"useOptimistic\"];\nfunction setMessage(error, message) {\n  error.message = message;\n  if (error.stack) {\n    const lines = error.stack.split(\"\\n\");\n    lines[0] = message;\n    error.stack = lines.join(\"\\n\");\n  }\n}\nfunction formatServerError(error) {\n  if (typeof (error == null ? void 0 : error.message) !== \"string\") return;\n  if (error.message.includes(\"Class extends value undefined is not a constructor or null\")) {\n    const addedMessage = \"This might be caused by a React Class Component being rendered in a Server Component, React Class Components only works in Client Components. Read more: https://nextjs.org/docs/messages/class-component-in-server-component\";\n    // If this error instance already has the message, don't add it again\n    if (error.message.includes(addedMessage)) return;\n    setMessage(error, `${error.message}\n\n${addedMessage}`);\n    return;\n  }\n  if (error.message.includes(\"createContext is not a function\")) {\n    setMessage(error, 'createContext only works in Client Components. Add the \"use client\" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/context-in-server-component');\n    return;\n  }\n  for (const clientHook of invalidServerComponentReactHooks) {\n    const regex = new RegExp(`\\\\b${clientHook}\\\\b.*is not a function`);\n    if (regex.test(error.message)) {\n      setMessage(error, `${clientHook} only works in Client Components. Add the \"use client\" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/react-client-hook-in-server-component`);\n      return;\n    }\n  }\n}","map":{"version":3,"names":["formatServerError","invalidServerComponentReactHooks","setMessage","error","message","stack","lines","split","join","includes","addedMessage","clientHook","regex","RegExp","test"],"sources":["../../src/lib/format-server-error.ts"],"sourcesContent":[null],"mappings":";;;;;+BAwBgB;;;WAAAA,iBAAA;;;AAxBhB,MAAMC,gCAAA,GAAmC,CACvC,oBACA,aACA,uBACA,sBACA,mBACA,cACA,UACA,YACA,wBACA,iBACA,8BACA,gBACD;AAED,SAASC,WAAWC,KAAY,EAAEC,OAAe;EAC/CD,KAAA,CAAMC,OAAO,GAAGA,OAAA;EAChB,IAAID,KAAA,CAAME,KAAK,EAAE;IACf,MAAMC,KAAA,GAAQH,KAAA,CAAME,KAAK,CAACE,KAAK,CAAC;IAChCD,KAAK,CAAC,EAAE,GAAGF,OAAA;IACXD,KAAA,CAAME,KAAK,GAAGC,KAAA,CAAME,IAAI,CAAC;EAC3B;AACF;AAEO,SAASR,kBAAkBG,KAAY;EAC5C,IAAI,QAAOA,KAAA,oBAAAA,KAAA,CAAOC,OAAO,MAAK,UAAU;EAExC,IACED,KAAA,CAAMC,OAAO,CAACK,QAAQ,CACpB,+DAEF;IACA,MAAMC,YAAA,GACJ;IAEF;IACA,IAAIP,KAAA,CAAMC,OAAO,CAACK,QAAQ,CAACC,YAAA,GAAe;IAE1CR,UAAA,CACEC,KAAA,EACC,GAAEA,KAAA,CAAMC,OAAQ;;AAEvB,EAAEM,YAAa,EAAC;IAEZ;EACF;EAEA,IAAIP,KAAA,CAAMC,OAAO,CAACK,QAAQ,CAAC,oCAAoC;IAC7DP,UAAA,CACEC,KAAA,EACA;IAEF;EACF;EAEA,KAAK,MAAMQ,UAAA,IAAcV,gCAAA,EAAkC;IACzD,MAAMW,KAAA,GAAQ,IAAIC,MAAA,CAAQ,MAAKF,UAAW,wBAAuB;IACjE,IAAIC,KAAA,CAAME,IAAI,CAACX,KAAA,CAAMC,OAAO,GAAG;MAC7BF,UAAA,CACEC,KAAA,EACC,GAAEQ,UAAW,sLAAqL;MAErM;IACF;EACF;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}