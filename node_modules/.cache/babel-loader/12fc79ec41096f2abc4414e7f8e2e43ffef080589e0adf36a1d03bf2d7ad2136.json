{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"getRawProjectId\", {\n  enumerable: true,\n  get: function () {\n    return getRawProjectId;\n  }\n});\nconst _child_process = require(\"child_process\");\n// Q: Why does Next.js need a project ID? Why is it looking at my git remote?\n// A:\n// Next.js' telemetry is and always will be completely anonymous. Because of\n// this, we need a way to differentiate different projects to track feature\n// usage accurately. For example, to prevent a feature from appearing to be\n// constantly `used` and then `unused` when switching between local projects.\n// To reiterate,\n// we **never** can read your actual git remote. The value is hashed one-way\n// with random salt data, making it impossible for us to reverse or try to\n// guess the remote by re-computing hashes.\nasync function _getProjectIdByGit() {\n  try {\n    let resolve, reject;\n    const promise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    (0, _child_process.exec)(`git config --local --get remote.origin.url`, {\n      timeout: 1000,\n      windowsHide: true\n    }, (error, stdout) => {\n      if (error) {\n        reject(error);\n        return;\n      }\n      resolve(stdout);\n    });\n    return String(await promise).trim();\n  } catch (_) {\n    return null;\n  }\n}\nasync function getRawProjectId() {\n  return (await _getProjectIdByGit()) || process.env.REPOSITORY_URL || process.cwd();\n}","map":{"version":3,"names":["getRawProjectId","_getProjectIdByGit","resolve","reject","promise","Promise","res","rej","_child_process","exec","timeout","windowsHide","error","stdout","String","trim","_","process","env","REPOSITORY_URL","cwd"],"sources":["../../src/telemetry/project-id.ts"],"sourcesContent":[null],"mappings":";;;;;+BA0CsB;;;WAAAA,eAAA;;;+BA1CD;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,eAAeC,mBAAA;EACb,IAAI;IACF,IAAIC,OAAA,EAA2CC,MAAA;IAC/C,MAAMC,OAAA,GAAU,IAAIC,OAAA,CAAyB,CAACC,GAAA,EAAKC,GAAA;MACjDL,OAAA,GAAUI,GAAA;MACVH,MAAA,GAASI,GAAA;IACX;IAEA,IAAAC,cAAA,CAAAC,IAAI,EACD,4CAA2C,EAC5C;MACEC,OAAA,EAAS;MACTC,WAAA,EAAa;IACf,GACA,CAACC,KAAA,EAAqBC,MAAA;MACpB,IAAID,KAAA,EAAO;QACTT,MAAA,CAAOS,KAAA;QACP;MACF;MACAV,OAAA,CAAQW,MAAA;IACV;IAGF,OAAOC,MAAA,CAAO,MAAMV,OAAA,EAASW,IAAI;EACnC,EAAE,OAAOC,CAAA,EAAG;IACV,OAAO;EACT;AACF;AAEO,eAAehB,gBAAA;EACpB,OACE,OAAOC,kBAAA,OAAyBgB,OAAA,CAAQC,GAAG,CAACC,cAAc,IAAIF,OAAA,CAAQG,GAAG;AAE7E"},"metadata":{},"sourceType":"script","externalDependencies":[]}