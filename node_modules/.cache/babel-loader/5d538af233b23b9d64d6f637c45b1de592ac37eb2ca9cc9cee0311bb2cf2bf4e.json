{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  ipcForbiddenHeaders: null,\n  actionsForbiddenHeaders: null,\n  filterReqHeaders: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  ipcForbiddenHeaders: function () {\n    return ipcForbiddenHeaders;\n  },\n  actionsForbiddenHeaders: function () {\n    return actionsForbiddenHeaders;\n  },\n  filterReqHeaders: function () {\n    return filterReqHeaders;\n  }\n});\nconst ipcForbiddenHeaders = [\"accept-encoding\", \"keepalive\", \"keep-alive\", \"content-encoding\", \"transfer-encoding\",\n// https://github.com/nodejs/undici/issues/1470\n\"connection\",\n// marked as unsupported by undici: https://github.com/nodejs/undici/blob/c83b084879fa0bb8e0469d31ec61428ac68160d5/lib/core/request.js#L354\n\"expect\"];\nconst actionsForbiddenHeaders = [...ipcForbiddenHeaders, \"content-length\"];\nconst filterReqHeaders = (headers, forbiddenHeaders) => {\n  // Some browsers are not matching spec and sending Content-Length: 0. This causes issues in undici\n  // https://github.com/nodejs/undici/issues/2046\n  if (headers[\"content-length\"] && headers[\"content-length\"] === \"0\") {\n    delete headers[\"content-length\"];\n  }\n  for (const [key, value] of Object.entries(headers)) {\n    if (forbiddenHeaders.includes(key) || !(Array.isArray(value) || typeof value === \"string\")) {\n      delete headers[key];\n    }\n  }\n  return headers;\n};","map":{"version":3,"names":["ipcForbiddenHeaders","actionsForbiddenHeaders","filterReqHeaders","headers","forbiddenHeaders","key","value","Object","entries","includes","Array","isArray"],"sources":["../../../../src/server/lib/server-ipc/utils.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;EAAaA,mBAAmB,WAAAA,CAAA;WAAnBA,mBAAA;;EAYAC,uBAAuB,WAAAA,CAAA;WAAvBA,uBAAA;;EAKAC,gBAAgB,WAAAA,CAAA;WAAhBA,gBAAA;;;AAjBN,MAAMF,mBAAA,GAAsB,CACjC,mBACA,aACA,cACA,oBACA;AACA;AACA;AACA;AACA,SACD;AAEM,MAAMC,uBAAA,GAA0B,C,GAClCD,mBAAA,EACH,iBACD;AAEM,MAAME,gBAAA,GAAmBA,CAC9BC,OAAA,EACAC,gBAAA;EAEA;EACA;EACA,IAAID,OAAO,CAAC,iBAAiB,IAAIA,OAAO,CAAC,iBAAiB,KAAK,KAAK;IAClE,OAAOA,OAAO,CAAC,iBAAiB;EAClC;EAEA,KAAK,MAAM,CAACE,GAAA,EAAKC,KAAA,CAAM,IAAIC,MAAA,CAAOC,OAAO,CAACL,OAAA,GAAU;IAClD,IACEC,gBAAA,CAAiBK,QAAQ,CAACJ,GAAA,KAC1B,EAAEK,KAAA,CAAMC,OAAO,CAACL,KAAA,KAAU,OAAOA,KAAA,KAAU,QAAO,GAClD;MACA,OAAOH,OAAO,CAACE,GAAA,CAAI;IACrB;EACF;EACA,OAAOF,OAAA;AACT"},"metadata":{},"sourceType":"script","externalDependencies":[]}